// JavaScript Document//HTML5 Ad Template JS from DoubleClick by Google//Declaring elements from the HTML i.e. Giving them Instance Names like in Flash - makes it easiervar container;var content;var ytClose;var video;var btnReplay;var btnMute;var started = false;var over28sec = false;function start(){    if (!started)    {        started = true;        startVideo();    }}function hideLoading(){    setVisible("content_dc", true);    setVisible("loading_dc", false);}//Function to run with any animations starting on load, or bringing in images etcfunction init(){    console.log("init");    //Assign All the elements to the element on the page    container = document.getElementById('container_dc');    content = document.getElementById('content_dc');    ytClose = document.getElementById('close');    btnReplay = document.getElementById("replay");    btnMute = document.getElementById("mute");    btnReplay.addEventListener("click", function ()    {        video.muted = false;        Enabler.counter('Video_Replay');        startVideo();    });    btnMute.addEventListener("click", toggleSound);    if (!canControlVolume())    {        addClass("mute", "disabled");    }    video = initBackgroundVideo();    video.addEventListener("playing", function ()    {        hideLoading();        setVisible(btnReplay, false);        setVisible(btnMute, true);        setVisible("endshot", false);        setVisible("white-fade", false);        setVisible("cta", true);        removeClass("endshot", "skipanimation");        removeClass("endshot", "animate-endshot");        setClass(btnMute, "muted", video.muted);				removeClass("endshot_gif", "endshot_anim");        removeClass("rain", "animating");        removeClass("heat", "animating");        removeClass("snow", "animating");    });    var progressListener = new VideoProgressListener(video);    progressListener.at(1.1, function ()    {        addClass("rain", "animating");    });    progressListener.at(2.7, function ()    {        removeClass("rain", "animating");    });    progressListener.at(2.8, function ()    {        addClass("heat", "animating");    });    progressListener.at(3.8, function ()    {        removeClass("heat", "animating");    });    progressListener.at(4, function ()    {        addClass("snow", "animating");    });    progressListener.at(5, function ()    {        removeClass("snow", "animating");    });    progressListener.at(17.5, function ()    {        showEndshot(true);    });    //Bring in listeners i.e. if a user clicks or rollsover    addListeners();    //Show Ad    container.style.display = "block";    start();    setTimeout(timeOutAnim, 28000);    if (loaderClicked)        bgExitLoader();}function timeOutAnim (){	over28sec = true;	freezeAll();}function freezeAll(){    addClass(document.body, "animations-disabled");    removeClass(document.body, "animations-enabled");	addClass("endshot_gif", "hidden");}function showEndshot(animate){	setVisible("cta", true);	    if (animate)    {        setVisible("white-fade", true);        addClass("endshot", "animate");        setVisible('endshot', true);				if ( over28sec == false )		{			removeClass("endshot_gif", "hidden");			addClass("endshot_gif", "endshot_anim");		}    }    else    {        setVisible('endshot', true);        removeClass("endshot", "animate");    }    setVisible(btnReplay, true);    setVisible(btnMute, false);    video.pause();}function startVideo(){    video.autoplay = true;    if (video.currentTime > 0)        video.currentTime = 0;    video.play();}function toggleSound(){    video.muted = !video.muted;    setClass(btnMute, "muted", video.muted);    if (video.muted)        Enabler.counter('Video_Muted');    else        Enabler.counter('Video_Unmuted');}//Add Event Listenersfunction addListeners(){    document.getElementById("background-click").addEventListener('click', bgExitVideo, false);    document.getElementById("click-loader").addEventListener('click', bgExitLoader, false);    document.getElementById("endshot-click").addEventListener('click', bgExitHandler, false);    document.getElementById("cta").addEventListener('click', exitCTA, false);}function exitCTA(){    freezeAll();    showEndshot();    Enabler.exit('Click_CTA');}function bgExitHandler(e){    freezeAll();    showEndshot();    //Call Exits    Enabler.exit('HTML5_Background_Clickthrough');}function bgExitVideo(e){    freezeAll();    showEndshot();    //Call Exits    Enabler.exit('Click_Video');}function bgExitLoader(e){    freezeAll();    hideLoading();    showEndshot();    //Call Exits    Enabler.exit('Click_Loader');}function initBackgroundVideo(){    var video = document.getElementById("background-video");    Enabler.loadModule(studio.module.ModuleId.VIDEO, function ()    {        studio.video.Reporter.attach('video_background', video);    });    addVideoSource(video, "video/MICHELIN_300x600_18s_x264.mp4", "video/mp4");    video.load();    return video;}init();console.log("crap");