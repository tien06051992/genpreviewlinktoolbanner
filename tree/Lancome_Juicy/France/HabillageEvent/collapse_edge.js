!function(e){"use strict";var o="images/",t="media/",n={},i={gAudioPreloadPreference:"auto",gVideoPreloadPreference:"auto"},a=[],r=[],l={stage:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!1,content:{dom:[{id:"video_group",type:"group",rect:["0px","0px","1000px","220px","auto","auto"],c:[{id:"video",display:"block",volume:"0",type:"video",tag:"video",rect:["0px","0px","1000px","220px","auto","auto"],autoplay:"autoplay",opacity:"1",source:[t+"video.mp4"],preload:"metadata"}]},{id:"bg_loader",display:"block",type:"image",rect:["0px","0px","1000px","220px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",o+"bg_loader.jpg","0px","0px"]},{id:"bg_endcard",display:"none",type:"image",rect:["0","0","1000px","220px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",o+"bg_endcard.jpg","0px","0px"]},{id:"packshot",display:"none",type:"image",rect:["211px","68px","90px","132px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",o+"packshot.png","0px","0px"]},{id:"thenewfragrance",display:"none",type:"image",rect:["182px","200px","139px","8px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",o+"thenewfragrance.png","0px","0px"]},{id:"logo_dior_endcard",display:"none",type:"image",rect:["201px","16px","100px","40px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",o+"logo_dior_endcard.png","0px","0px"]},{id:"CTA",display:"block",type:"group",rect:["683px","178px","192px","29px","auto","auto"],overflow:"visible",opacity:"1",c:[{id:"_cta",type:"image",rect:["0px","0px","192px","29px","auto","auto"],fill:["rgba(0,0,0,0)",o+"cta.png","0px","0px"]},{id:"_cursor",symbolName:"cursor",display:"block",type:"rect",rect:["176px","11px","12","10","auto","auto"]}]},{id:"loader",type:"image",rect:["486px","113px","35px","5px","auto","auto"],fill:["rgba(0,0,0,0)",o+"loader.gif","0px","0px"]},{id:"logo_poison_endcard",display:"none",type:"image",rect:["683px","38px","192px","123px","auto","auto"],overflow:"visible",opacity:"1",fill:["rgba(0,0,0,0)",o+"logo_poison.png","0px","0px"]},{id:"logo_poison_video",display:"block",type:"image",rect:["42px","92px","157px","101px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",o+"logo_poison_video.png","0px","0px"]},{id:"logo_dior_video",display:"block",type:"image",rect:["61px","38px","119px","48px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",o+"logo_dior_video.png","0px","0px"]},{id:"click_to_play_poster",symbolName:"click_to_play_poster",display:"none",type:"rect",rect:["0","0","100%","100%","auto","auto"]},{id:"hover2expand",display:"none",type:"rect",rect:["0px","87px","1000px","134px","auto","auto"],opacity:"0",fill:["rgba(192,192,192,1)"],stroke:[0,"rgba(0,0,0,1)","none"]},{id:"replay_group",type:"group",rect:["0px","0px","0px","0px","auto","auto"],c:[{id:"replay_button",display:"none",type:"image",rect:["976px","auto","18px","20px","auto","-25px"],fill:["rgba(0,0,0,0)",o+"replay.png","0px","0px"]}]},{id:"mute_group",type:"group",rect:["0px","0px","0","0","auto","auto"],c:[{id:"mute_button",symbolName:"mute_button",display:"block",type:"rect",rect:["971px","auto","43","26","auto","-32px"],overflow:"visible"}]}],style:{"${collapse}":{isStage:!0,rect:["null","null","1000px","220px","auto","auto"],sizeRange:["0px","","",""],overflow:"hidden",fill:["rgba(255,255,255,1.00)"]}}},timeline:{duration:23e3,autoPlay:!1,labels:{endshot:19051,frozen:23e3},data:[["eid271","display",0,0,"easeInOutQuad","${CTA}","block","block"],["eid283","width",21800,0,"linear","${logo_poison_endcard}","192px","192px"],["eid285","width",21800,0,"linear","${CTA}","192px","192px"],["eid259","top",10218,0,"easeInOutQuad","${logo_dior_video}","38px","38px"],["eid219","opacity",15333,287,"easeInOutQuad","${logo_dior_endcard}","0","1"],["eid282","height",21800,0,"linear","${logo_poison_endcard}","123px","123px"],["eid221","opacity",15467,287,"easeInOutQuad","${packshot}","0","1"],["eid141","opacity",15467,287,"linear","${bg_endcard}","0","1"],["eid211","display",15333,0,"easeInOutQuad","${logo_dior_endcard}","none","block"],["eid257","display",15145,0,"easeInOutQuad","${logo_poison_video}","block","none"],["eid198","opacity",0,500,"linear","${bg_loader}","1","0"],["eid279","left",21800,0,"linear","${logo_poison_endcard}","683px","683px"],["eid256","opacity",14563,582,"easeInOutQuad","${logo_poison_video}","1","0"],["eid115","display",19051,0,"linear","${mute_button}","block","none"],["eid105","display",19051,0,"linear","${replay_button}","none","block"],["eid284","height",21800,0,"linear","${CTA}","29px","29px"],["eid199","display",501,0,"linear","${bg_loader}","block","none"],["eid168","opacity",14417,582,"easeInOutQuad","${logo_dior_video}","1","0"],["eid250","display",0,0,"linear","${logo_poison_endcard}","none","none"],["eid237","display",15800,0,"easeInOutQuad","${logo_poison_endcard}","none","block"],["eid131","display",0,0,"linear","${click_to_play_poster}","none","none"],["eid253","opacity",0,0,"linear","${logo_poison_endcard}","1","1"],["eid223","opacity",15800,287,"easeInOutQuad","${logo_poison_endcard}","0","1"],["eid220","opacity",15620,287,"easeInOutQuad","${thenewfragrance}","0","1"],["eid191","display",14999,0,"easeInOutQuad","${logo_dior_video}","block","none"],["eid194","display",19051,0,"easeInOutQuad","${video}","block","none"],["eid212","display",15620,0,"easeInOutQuad","${thenewfragrance}","none","block"],["eid287","display",0,0,"linear","${hover2expand}","none","none"],["eid288","display",19e3,0,"linear","${hover2expand}","none","block"],["eid210","display",15467,0,"easeInOutQuad","${packshot}","none","block"],["eid195","display",15467,0,"linear","${bg_endcard}","none","block"],["eid132","trigger",0,function(e,o){this._executeSymbolAction(e,o)},["play","${click_to_play_poster}",[]]],["eid272","trigger",19e3,function(e,o){this._executeSymbolAction(e,o)},["stop","${_cursor}",[0]]]]}},mute_button:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!1,content:{dom:[{rect:["0px","0px","24px","18px","auto","auto"],overflow:"hidden",id:"sound-on",type:"image",display:"block",fill:["rgba(0,0,0,0)","images/sound-on.png","0px","0px"]},{rect:["0px","0px","24px","18px","auto","auto"],overflow:"visible",id:"sound-off",type:"image",display:"none",fill:["rgba(0,0,0,0)","images/sound-off.png","0px","0px"]}],style:{"${symbolSelector}":{rect:[null,null,"24px","18px"]}}},timeline:{duration:2e3,autoPlay:!1,labels:{on:0,off:2e3},data:[["eid110","display",0,0,"linear","${sound-on}","block","block"],["eid111","display",2e3,0,"linear","${sound-on}","block","none"],["eid109","display",0,0,"linear","${sound-off}","none","none"],["eid112","display",2e3,0,"linear","${sound-off}","none","block"]]}},click_to_play_poster:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!0,content:{dom:[{rect:["0px","0px","100%","100%","auto","auto"],id:"poster",opacity:"0",type:"image",fill:["rgba(0,0,0,0)","images/click_to_play_poster.jpg","0px","0px"]}],style:{"${symbolSelector}":{rect:[null,null,"100%","100%"]}}},timeline:{duration:1e3,autoPlay:!0,data:[["eid127","opacity",0,0,"linear","${poster}","0","0"],["eid137","opacity",497,0,"linear","${poster}","0","1"],["eid138","opacity",1e3,0,"linear","${poster}","1","1"]]}},cursor:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!1,content:{dom:[{type:"image",id:"_cursor_expand",rect:["0px","-1px","12px","10px","auto","auto"],fill:["rgba(0,0,0,0)","images/cursor_expand.png","0px","0px"]}],style:{"${symbolSelector}":{rect:[null,null,"12px","10px"]}}},timeline:{duration:796,autoPlay:!0,labels:{loop:0},data:[["eid280","top",228,284,"easeInOutQuad","${_cursor_expand}","-1px","2px"],["eid281","top",513,283,"easeInOutQuad","${_cursor_expand}","2px","-1px"]]}}};AdobeEdge.registerCompositionDefn(e,l,n,r,a,i)}("collapse");!function(e,o,t){var n=(o.Composition,o.Symbol),i=null;!function(e){n.bindElementAction(t,e,"${collapse}","click",function(e,o){if(i.playHeadIsBeforeEndshotLabel())Enabler.counter("Collapse_Click_On_Video",true);else Enabler.counter("Collapse_Click_On_Endshot",true);i.freeze()});n.bindSymbolAction(t,e,"creationComplete",function(e,n){e.getSymbolElement().css({cursor:"pointer"});i=new RichControllerClass(o.getComposition(t));if(!i.muteAudioSupported())e.$("mute_group").hide()});n.bindElementAction(t,e,"document","compositionReady",function(e,o){i.start();var t=e.getSymbol("mute_button");if(null!=t)t.stop(i.isMuted()?"off":"on")});n.bindElementAction(t,e,"${replay_button}","click",function(e,o){o.stopPropagation();o.preventDefault();i.mute();var t=e.getSymbol("mute_button");t.stop("off");i.rePlay();Enabler.counter("Collapse_Click_On_Video_Replay",true)});n.bindElementAction(t,e,"${mute_button}","click",function(e,o){o.stopPropagation();o.preventDefault();var t=i.isMuted();if(t)i.unmute();else i.mute();t=!t;e.getSymbol("mute_button").stop(t?"off":"on");if(t)Enabler.counter("Collapse_Mute_Video",true);else Enabler.counter("Collapse_Unmute_Video",true)});n.bindTimelineAction(t,e,"Default Timeline","update",function(e,o){i.update()});n.bindElementAction(t,e,"${click_to_play_poster}","click",function(e,o){o.stopPropagation();o.preventDefault();i.playVideo();Enabler.counter("Collapse_Click_To_Launch_Video",true)});n.bindElementAction(t,e,"${hover2expand}","mouseover",function(e,o){if(!i.playHeadIsBeforeEndshotLabel()){Enabler.counter("Collapse_Hover_On_Endshot",true);i.mute();i.freeze();collapseHoverToExp()}});n.bindElementAction(t,e,"${collapse}","mouseover",function(e,o){o.stopPropagation();o.preventDefault();var t=i.isMuted();i.unmute();e.getSymbol("mute_button").stop("on");if(t)Enabler.counter("Collapse_Mute_Video",true);else Enabler.counter("Collapse_Unmute_Video",true)});n.bindElementAction(t,e,"${collapse}","mouseout",function(e,o){o.stopPropagation();o.preventDefault();var t=i.isMuted();i.mute();e.getSymbol("mute_button").stop("off");if(t)Enabler.counter("Collapse_Mute_Video",true);else Enabler.counter("Collapse_Unmute_Video",true)})}("stage");!function(e){}("Preloader");!function(e){}("mute_button");!function(e){}("click_to_play_poster");!function(e){n.bindTriggerAction(t,e,"Default Timeline",796,function(e,o){e.play("loop")})}("cursor")}(AdobeEdge.$,AdobeEdge,"collapse");var config={autoFreezeTime:28e3,unmutedVolume:.5,cancelFreezeOnYoutubeInteraction:!0},RichControllerClass=function(e){function o(){if(null==$){if(!("YouTubeComp"in window))throw"youtube-comp.js is not included.";$=new YouTubeComp(f.eventBus);if(config.cancelFreezeOnYoutubeInteraction)$.eventBus.addEventListener($.USER_INTERACTION,a)}return $}function t(){if(!document[("mshidden"in document?"ms":"")+"hidden"])if(f.mobile.inPageVideoSupport()&&m&&_.currentTime>1/12&&_.currentTime<_.duration&&!y){if(_.paused)_.play();l()}}function n(){if("Enabler"in window){var e=[],o=_.querySelectorAll("source");if(0==o.length){var t=_.getAttribute("src"),n=t.lastIndexOf("media/");e.push(t.substr(n));_.removeAttribute("src")}else for(var i=0;i<o.length;i++){var t=o[i].src,n=t.lastIndexOf("media/");e.push(t.substr(n));_.removeChild(o[i])}for(var i=0;i<e.length;i++){var a=document.createElement("source");a.src=Enabler.getUrl(e[i]);_.appendChild(a)}}}function i(){a();if(config.autoFreezeTime>=0)b=setTimeout(function(){f.freeze(!0)},config.autoFreezeTime)}function a(){if(null!=b){clearTimeout(b);b=null}}function r(){var e=0,o=!0;setInterval(function(){if(!y)if(!isNaN(_.currentTime)&&!isNaN(_.duration)){if(_.currentTime==e&&_.currentTime<_.duration&&!o){o=!0;g.stop(1e3*_.currentTime)}if(c()&&o){o=!1;g.play(1e3*_.currentTime)}var t=g.getPosition()/1e3;if(t<_.duration&&Math.abs(t-_.currentTime)>.2){console.log("resync video");if(c())g.play(1e3*_.currentTime);else g.stop(1e3*_.currentTime)}e=_.currentTime}},100)}function l(){if(!y)if(!isNaN(_.currentTime)&&!isNaN(_.duration))if(_.currentTime<_.duration)g.play(1e3*_.currentTime)}function u(){var e=0,o={0:function(){Enabler.counter("Collapse_Video_Progress_0%",true)},.25:function(){Enabler.counter("Collapse_Video_Progress_25%",true)},.5:function(){Enabler.counter("Collapse_Video_Progress_50%",true)},.75:function(){Enabler.counter("Collapse_Video_Progress_75%",true)},1:function(){Enabler.counter("Collapse_Video_Progress_100%",true)}};_.addEventListener("timeupdate",function(){if(!isNaN(_.currentTime)&&!isNaN(_.duration)){var t=_.currentTime/_.duration;if(e!=t){for(var n in o)if(n>=e&&t>=n)o[n]();e=t}}else e=0},!1)}function s(e){function o(){if(c()){_.removeEventListener("canplay",o,!1);_.removeEventListener("timeupdate",o,!1);e()}}_.addEventListener("canplay",o,!1);_.addEventListener("timeupdate",o,!1)}function p(e){e.stop("frozen");for(var o=e.getChildSymbols(),t=0;t<o.length;t++)p(o[t])}function c(){return _.currentTime>1/12&&!_.paused}function d(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()},hasTouchScreen:function(){var e=!1,o=function(e){return-1!==window.navigator.userAgent.toLowerCase().indexOf(e)};return("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(o("NT 5")||o("NT 6.1")||o("NT 6.0")||(e=!0)),e},inPageVideoSupport:function(){return!navigator.userAgent.match(/iPhone|iPod/i)}};return e}try{var f=this,m=!0;f.eventBus=new EventBusClass;f.FREEZE="FREEZE";f.mobile=d();f.isFrozen=function(){return y};f.isMuted=function(){return _.volume<=0};f.muteAudioSupported=function(){return!f.mobile.iOS()};e.controller=this;var g=e.getStage(),y=!1,b=null,x=g.$("loader"),_=g.$("video")[0],v=g.$("click_to_play_poster"),h=!0;n();studio.video.Reporter.attach("Collapse_Intro",_)}catch(k){console.error("%s\n%O",k,k.stack)}f.disableVideoOnMobile=function(){if(f.mobile.any())m=!1};f.start=function(){try{document.addEventListener(("mshidden"in document?"ms":"")+"visibilitychange",t);if(f.mobile.any())Enabler.counter("Collapse_Mobile_Served",true);else Enabler.counter("Collapse_Desktop_Served",true);if(!y)i();v.hide();if(f.mobile.inPageVideoSupport()&&m){r();u();if(!y){s(function(){x.hide();h=!1});if(_.currentTime)_.currentTime=0;if(f.mobile.any()){_.pause();v.show()}else _.play()}else{x.hide();h=!1}}else{_.pause();g.$("video_group").hide();x.hide();h=!1;g.$("replay_group").hide();g.play("endshot")}console.log("started with config: %O",config)}catch(e){console.error("%s\n%O",e,e.stack)}};f.update=function(){try{if(y||!g.isPlaying())return;if(g.getPosition()>=g.getLabelPosition("frozen"))f.freeze(!0);f.eventBus.dispatch("UPDATE");var e=_.currentTime/_.duration;g.$("progress").css({width:100*e+"%"})}catch(o){console.error("%s\n%O",o,o.stack)}};f.playVideo=function(){try{y=!1;i();v.hide();_.currentTime=0;_.play()}catch(e){console.error("%s\n%O",e,e.stack)}};f.rePlay=function(){try{f.eventBus.dispatch("REPLAY");f.stopAllYouTubePlayers();y=!1;i();x.show();s(function(){x.hide()});g.play(0);_.load();if(_.currentTime)_.currentTime=0;_.play()}catch(e){console.error("%s\n%O",e,e.stack)}};f.freeze=function(e){try{e=void 0==e?!1:!0;a();if(!y){y=!0;p(g);x.hide();h=!1;v.hide();_.pause();console.log("frozen")}f.eventBus.dispatch(f.FREEZE,f,e)}catch(o){console.error("%s\n%O",o,o.stack)}};f.isVideoLoading=function(){return m&&h};f.playHeadIsBeforeEndshotLabel=function(){try{return g.getPosition()<g.getLabelPosition("endshot")}catch(e){console.error("%s\n%O",e,e.stack)}};f.mute=function(){_.volume=0};f.unmute=function(){_.volume=config.unmutedVolume};f.play=function(){_.play();g.play()};f.pause=function(){_.pause();g.stop()};f.togglePlay=function(){if(f.isPlaying())f.pause();else f.play()};f.isPlaying=function(){return!_.paused};var $=null;f.createYouTubePlayer=function(e,t,n,i){try{o().createYouTubePlayer(e,t,n,i)}catch(a){console.error("%s\n%O",a,a.stack)}};f.setYouTubePlayer=function(e,t,n,i){var a=new YoutubePlayerLoader(this,g,o());a.setPlayer(e,t,n,i)};f.stopAllYouTubePlayers=function(){try{return o().stopAllYouTubePlayers()}catch(e){console.error("%s\n%O",e,e.stack)}return null}},EventBusClass={};EventBusClass=function(){this.listeners={}};EventBusClass.prototype={addEventListener:function(e,o,t){for(var n=[],i=arguments.length,a=0;i>a;a++)n.push(arguments[a]);n=n.length>3?n.splice(3,n.length-1):[];if("undefined"!=typeof this.listeners[e])this.listeners[e].push({scope:t,callback:o,args:n});else this.listeners[e]=[{scope:t,callback:o,args:n}]},removeEventListener:function(e,o,t){if("undefined"!=typeof this.listeners[e]){for(var n=this.listeners[e].length,i=[],a=0;n>a;a++){var r=this.listeners[e][a];if(r.scope==t&&r.callback==o);else i.push(r)}this.listeners[e]=i}},hasEventListener:function(e,o,t){if("undefined"!=typeof this.listeners[e]){var n=this.listeners[e].length;if(void 0===o&&void 0===t)return n>0;for(var i=0;n>i;i++){var a=this.listeners[e][i];if((t?a.scope==t:!0)&&a.callback==o)return!0}}return!1},dispatch:function(e,o){for(var t=0,n={type:e,target:o},i=[],a=arguments.length,r=0;a>r;r++)i.push(arguments[r]);i=i.length>2?i.splice(2,i.length-1):[];i=[n].concat(i);if("undefined"!=typeof this.listeners[e])for(var l=this.listeners[e].length,r=0;l>r;r++){var u=this.listeners[e][r];if(u&&u.callback){var s=i.concat(u.args);u.callback.apply(u.scope,s);t+=1}}},getEvents:function(){var e="";for(var o in this.listeners)for(var t=this.listeners[o].length,n=0;t>n;n++){var i=this.listeners[o][n];e+=i.scope&&i.scope.className?i.scope.className:"anonymous";e+=" listen for '"+o+"'\n"}return e}};var EventBus=new EventBusClass;