function YoutubePlayerLoader(e,t,o){function n(){if(b)b.seekTo(0);c=!1;d=!1}function a(){u()}function i(e){e=void 0==e?!1:e;d=!0;u()}function u(){var e=t.getLabelPosition("youtube")||t.getLabelPosition("endshot");if(t.getPosition()>=e)if(!p){p=!0;c=!0;r()}else if(!c&&!d){c=!0;l()}}function r(){if(d)m.autoplay=0;o.createYouTubePlayer(f,y,m,function(e){b=e;g(b)})}function l(){if(b)b.playVideo()}var s=this,p=!1,c=!1,d=!1;e.eventBus.addEventListener("FREEZE",i);e.eventBus.addEventListener("UPDATE",a);e.eventBus.addEventListener("REPLAY",n);var f,y,m,g,b;s.setPlayer=function(e,t,o,n){f=e;y=t;m=o||{iv_load_policy:3,modestbranding:1,playsinline:1,rel:0,showinfo:0};g=n}}!function(e){"use strict";var t="images/",o="media/",n={},a={gAudioPreloadPreference:"auto",gVideoPreloadPreference:"auto"},i=[],u=[],r={stage:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!1,content:{dom:[{id:"bg_endcard",type:"image",rect:["0px","0px","1000px","220px","auto","auto"],fill:["rgba(0,0,0,0)",t+"bg_endcard.jpg","0px","0px"]},{id:"video_group",type:"group",rect:["0","0","1000px","220px","auto","auto"],overflow:"hidden",c:[{id:"video",display:"block",volume:"0",type:"video",tag:"video",rect:["0px","0px","1000px","500px","auto","auto"],overflow:"visible",autoplay:"autoplay",opacity:"1",source:[o+"video_expand.mp4"],preload:"metadata"}]},{id:"expand_bg",display:"none",type:"image",rect:["0","0px","1000px","500px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",t+"expand_bg.jpg","0px","0px"]},{id:"parallax",type:"group",rect:["0px","0px","1000px","500px","auto","auto"],c:[{id:"CTA",display:"none",type:"image",rect:["634px","398px","257px","29px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"cta_expand.png","0px","0px"]},{id:"IMAGES_GRID",display:"none",type:"group",rect:["655px","128px","279","279","auto","auto"],c:[{id:"_expand_logo",display:"none",type:"image",rect:["116px","11px","120px","79px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"expand_logo_poison.png","0px","0px"]},{id:"_expand_pack",display:"none",type:"image",rect:["-21px","131px","120px","120px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"expand_im5.png","0px","0px"]},{id:"_expand_camille_dos",display:"none",type:"image",rect:["-21px","-7px","120px","120px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"expand_im3.png","0px","0px"]},{id:"_expand_camille_34_2",display:"none",type:"image",rect:["116px","131px","120px","120px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"expand_im4.png","0px","0px"]}]},{id:"PLAYER_YT",display:"none",type:"group",rect:["55px","113px","601","350","auto","auto"],opacity:"0",c:[{id:"_expand_bgPlayer",type:"image",rect:["14px","-13px","601px","350px","auto","auto"],fill:["rgba(0,0,0,0)",t+"expand_bgPlayer22.png","0px","0px"],transform:[[],[],[],["0.86243","0.93714"]]},{id:"mask",type:"rect",rect:["13px","-13px","601px","350px","auto","auto"],overflow:"hidden",fill:["rgba(0,0,0,0.00)"],stroke:[0,"rgb(0, 0, 0)","none"],transform:[[],[],[],["0.824","0.87428"]],c:[{id:"youtube",type:"rect",rect:["9px","16px","566px","316px","auto","auto"],fill:["rgba(0,0,0,1.00)"],stroke:[0,"rgb(0, 0, 0)","none"],transform:[[],[],[],["1.1093","1.1093"]]}]},{id:"youtube_mute",symbolName:"youtube_mute",display:"none",type:"rect",rect:["98px","268px","50px","50px","auto","auto"],opacity:"0"},{id:"youtube_play_pause",symbolName:"youtube_play_pause",display:"none",type:"rect",rect:["61px","268px","50px","50px","auto","auto"],opacity:"0"}]},{id:"expand_logoDior",type:"image",rect:["295px","32px","146px","58px","auto","auto"],opacity:"0",fill:["rgba(0,0,0,0)",t+"expand_logoDior.png","0px","0px"]}]},{id:"bg_endcardCopy",display:"block",type:"image",rect:["0px","0px","1000px","220px","auto","auto"],fill:["rgba(0,0,0,0)",t+"bg_endcard.jpg","0px","0px"]},{id:"CTA_collapse",type:"group",rect:["683px","178px","192px","29px","auto","auto"],opacity:"0",c:[{id:"_cta",type:"image",rect:["0px","0px","192px","29px","auto","auto"],fill:["rgba(0,0,0,0)",t+"cta.png","0px","0px"]},{id:"_cta_cursor",type:"image",rect:["173px","12px","12px","10px","auto","auto"],fill:["rgba(0,0,0,0)",t+"cursor_expand.png","0px","0px"]}]},{id:"loader",type:"image",rect:["785px","155px","35px","5px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"loader.gif","0px","0px"]},{id:"logo_dior_endcard",type:"image",rect:["201px","16px","100px","40px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"logo_dior_endcard.png","0px","0px"]},{id:"packshot",type:"image",rect:["211px","68px","90px","132px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"packshot.png","0px","0px"]},{id:"thenewfragrance",type:"image",rect:["182px","200px","139px","8px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"thenewfragrance.png","0px","0px"]},{id:"logo_poison",type:"image",rect:["683px","38px","192px","123px","auto","auto"],opacity:"1",fill:["rgba(0,0,0,0)",t+"logo_poison.png","0px","0px"]},{id:"close_button",type:"image",rect:["auto","7px","57px","12px","9px","auto"],fill:["rgba(0,0,0,0)",t+"expand_close.png","0px","0px"]}],style:{"${expand}":{isStage:!0,rect:["null","null","1000px","500px","auto","auto"],sizeRange:["0px","","",""],overflow:"hidden",fill:["rgba(255,255,255,0.00)"]}}},timeline:{duration:1e4,autoPlay:!1,labels:{youtube:2e3,endshot:9e3,frozen:1e4},data:[["eid229","display",1291,0,"easeInOutQuad","${expand_bg}","none","block"],["eid175","display",2558,0,"easeInOutQuad","${_expand_camille_34_2}","none","block"],["eid469","opacity",0,500,"easeInOutQuad","${loader}","1","0"],["eid272","opacity",2975,0,"easeInOutQuad","${CTA}","1","1"],["eid274","opacity",2989,0,"easeInOutQuad","${CTA}","1","0"],["eid275","opacity",3e3,0,"easeInOutQuad","${CTA}","0","1"],["eid276","opacity",3012,0,"easeInOutQuad","${CTA}","1","0.01"],["eid277","opacity",3025,0,"easeInOutQuad","${CTA}","0.01","1"],["eid278","opacity",3046,0,"easeInOutQuad","${CTA}","1","0"],["eid279","opacity",3067,0,"easeInOutQuad","${CTA}","0","1"],["eid544","height",720,132,"linear","${video_group}","220px","500px"],["eid280","display",1451,0,"easeInOutQuad","${PLAYER_YT}","none","block"],["eid477","display",720,0,"easeInOutQuad","${loader}","block","none"],["eid282","display",2e3,0,"easeInOutQuad","${youtube_play_pause}","none","block"],["eid462","opacity",217,503,"easeInOutQuad","${logo_poison}","1","0"],["eid463","opacity",217,503,"easeInOutQuad","${logo_dior_endcard}","1","0"],["eid232","display",3051,0,"linear","${video}","block","none"],["eid547","display",0,0,"easeInOutQuad","${bg_endcardCopy}","block","block"],["eid546","display",500,0,"easeInOutQuad","${bg_endcardCopy}","block","none"],["eid281","opacity",1451,97,"easeInQuad","${PLAYER_YT}","0","0.9200000166893"],["eid545","opacity",1548,36,"easeOutQuad","${PLAYER_YT}","0.9200000166893","1"],["eid473","display",720,0,"easeInOutQuad","${logo_poison}","block","none"],["eid273","display",2975,0,"easeInOutQuad","${CTA}","none","block"],["eid468","opacity",0,500,"easeInOutQuad","${thenewfragrance}","1","0"],["eid144","opacity",1548,477,"easeInOutQuad","${expand_logoDior}","0","1"],["eid184","display",2158,0,"easeInOutQuad","${_expand_camille_dos}","none","block"],["eid227","display",2025,0,"easeInOutQuad","${IMAGES_GRID}","none","block"],["eid472","opacity",107,495,"easeInOutQuad","${packshot}","1","0"],["eid139","opacity",1291,257,"easeInOutQuad","${expand_bg}","0","1"],["eid475","display",720,0,"easeInOutQuad","${packshot}","block","none"],["eid286","display",2e3,0,"easeInOutQuad","${youtube_mute}","none","block"],["eid474","display",720,0,"easeInOutQuad","${thenewfragrance}","block","none"],["eid185","display",2025,0,"easeInOutQuad","${_expand_pack}","none","block"],["eid182","display",2975,0,"easeInOutQuad","${_expand_logo}","none","block"],["eid476","display",720,0,"easeInOutQuad","${logo_dior_endcard}","block","none"],["eid287","trigger",0,function(e,t){this._executeSymbolAction(e,t)},["stop","${youtube_play_pause}",[0]]],["eid288","trigger",0,function(e,t){this._executeSymbolAction(e,t)},["stop","${youtube_mute}",["off"]]],["eid289","trigger",2e3,function(e,t){this._executeSymbolAction(e,t)},["stop","${youtube_play_pause}",[0]]],["eid290","trigger",2e3,function(e,t){this._executeSymbolAction(e,t)},["stop","${youtube_mute}",["off"]]]]}},mute_button:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!1,content:{dom:[{type:"image",overflow:"hidden",id:"sound-on",rect:["0px","0px","24px","18px","auto","auto"],display:"block",fill:["rgba(0,0,0,0)","images/sound-on.png","0px","0px"]},{type:"image",overflow:"visible",id:"sound-off",rect:["0px","0px","24px","18px","auto","auto"],display:"none",fill:["rgba(0,0,0,0)","images/sound-off.png","0px","0px"]}],style:{"${symbolSelector}":{rect:[null,null,"24px","18px"]}}},timeline:{duration:2e3,autoPlay:!1,labels:{on:0,off:2e3},data:[["eid110","display",0,0,"linear","${sound-on}","block","block"],["eid111","display",2e3,0,"linear","${sound-on}","block","none"],["eid109","display",0,0,"linear","${sound-off}","none","none"],["eid112","display",2e3,0,"linear","${sound-off}","none","block"]]}},youtube_play_pause:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!0,content:{dom:[{rect:["0px","0px","50px","50px","auto","auto"],borderRadius:["0px","0px","0px","0px"],id:"Rectangle3",stroke:[0,"rgb(0, 0, 0)","none"],type:"rect",fill:["rgba(0,0,0,0.00)"]},{rect:["19px","18px","12px","14px","auto","auto"],id:"play_big",type:"image",display:"block",fill:["rgba(0,0,0,0)","images/play_big.png","0px","0px"]},{rect:["19px","18px","12px","14px","auto","auto"],id:"pause_big",type:"image",display:"none",fill:["rgba(0,0,0,0)","images/pause_big.png","0px","0px"]}],style:{"${symbolSelector}":{rect:[null,null,"50px","50px"]}}},timeline:{duration:2e3,autoPlay:!0,labels:{play:0,pause:1e3},data:[["eid276","display",0,0,"easeInOutQuad","${play_big}","block","block"],["eid275","display",1e3,0,"easeInOutQuad","${play_big}","block","none"],["eid279","display",0,0,"easeInOutQuad","${pause_big}","none","none"],["eid278","display",1e3,0,"easeInOutQuad","${pause_big}","none","block"],["eid277","display",2e3,0,"easeInOutQuad","${pause_big}","block","none"]]}},youtube_mute:{version:"6.0.0",minimumCompatibleVersion:"5.0.0",build:"6.0.0.400",scaleToFit:"none",centerStage:"none",resizeInstances:!0,content:{dom:[{rect:["0px","0px","50px","50px","auto","auto"],borderRadius:["0px","0px","0px","0px"],id:"Rectangle3",stroke:[0,"rgb(0, 0, 0)","none"],type:"rect",fill:["rgba(0,0,0,0.00)"]},{rect:["13px","16px","24px","18px","auto","auto"],id:"sound-on",type:"image",display:"block",fill:["rgba(0,0,0,0)","images/sound-on.png","0px","0px"]},{rect:["13px","16px","24px","18px","auto","auto"],id:"sound-off",type:"image",display:"none",fill:["rgba(0,0,0,0)","images/sound-off.png","0px","0px"]}],style:{"${symbolSelector}":{rect:[null,null,"50px","50px"]}}},timeline:{duration:2e3,autoPlay:!0,labels:{on:0,off:1e3},data:[["eid285","display",0,0,"easeInOutQuad","${sound-on}","block","block"],["eid281","display",1e3,0,"easeInOutQuad","${sound-on}","block","none"],["eid284","display",0,0,"easeInOutQuad","${sound-off}","none","none"],["eid282","display",1e3,0,"easeInOutQuad","${sound-off}","none","block"],["eid283","display",2e3,0,"easeInOutQuad","${sound-off}","block","none"]]}}};AdobeEdge.registerCompositionDefn(e,r,n,u,i,a)}("expand");!function(e,t,o){var n=(t.Composition,t.Symbol),a=null;!function(e){n.bindElementAction(o,e,"${expand}","click",function(e,t){if(a.playHeadIsBeforeEndshotLabel())Enabler.counter("Expand_Click_On_Video",true);else Enabler.counter("Expand_Click_On_Endshot",true);a.freeze()});n.bindSymbolAction(o,e,"creationComplete",function(e,n){e.getSymbolElement().css({cursor:"pointer"});a=new RichControllerClass(t.getComposition(o));if(!a.muteAudioSupported())e.$("mute_group").hide();youtube_player=null;a.setYouTubePlayer(e.$("youtube"),"Bkr_lM0wLLg",{iv_load_policy:3,modestbranding:1,playsinline:1,rel:0,showinfo:0,controls:0,autoplay:1},function(t){youtube_player=t;t.mute();t.addEventListener("onStateChange",function(){e.getSymbol("youtube_play_pause").stop(1!=t.getPlayerState()?"play":"pause")})})});n.bindElementAction(o,e,"document","compositionReady",function(e,t){a.start();var o=e.getSymbol("mute_button");if(null!=o)o.stop(a.isMuted()?"off":"on")});n.bindTimelineAction(o,e,"Default Timeline","update",function(e,t){a.update()});n.bindElementAction(o,e,"${close_button}","click",function(e,t){t.stopPropagation();t.preventDefault();a.freeze();Enabler.counter("Expand_Click_On_Close",true);requestClose()});n.bindTriggerAction(o,e,"Default Timeline",1548,function(e,t){function o(){var t=e.$("parallax"),n=t.attr("z-depth-total"),a=parseFloat(t.attr("focus-x"))||0,i=parseFloat(t.attr("focus-y"))||0,u=parseFloat(t.attr("target-x"))||e.getSymbolElement().width()/2,r=parseFloat(t.attr("target-y"))||e.getSymbolElement().height()/2,l=2*u/e.getSymbolElement().width()-1,s=2*r/e.getSymbolElement().height()-1;if(a!=l||i!=s){var p=l-a,c=s-i,d=p*p+c*c,f=.03;if(d>2*f*f){var y=Math.sqrt(d);p=f*p/y;c=f*c/y;l=a+p;s=i+c}t.attr("focus-x",l);t.attr("focus-y",s);var m=["PLAYER_YT","expand_logoDior","IMAGES_GRID","CTA"];for(var g in m){var b=e.$(m[g]),x=parseFloat(b.attr("z-depth")),_=e.getSymbolElement().width()*(x/n);b.css({transform:"translate("+_*l+"px,"+_*s+"px) skewX("+.1*Math.random()+"deg)","transform-style":"preserve-3d"})}}requestAnimationFrame(o)}e.$("expand_logoDior").attr("z-depth",30);e.$("PLAYER_YT").attr("z-depth",25);e.$("IMAGES_GRID").attr("z-depth",15);e.$("CTA").attr("z-depth",8);e.$("parallax").attr("z-depth-total",1e3);requestAnimationFrame(o)});n.bindElementAction(o,e,"${expand}","mouseleave",function(e,t){e.$("parallax").attr("target-x",e.getSymbolElement().width()/2);e.$("parallax").attr("target-y",e.getSymbolElement().height()/2)});n.bindElementAction(o,e,"${expand}","mousemove",function(e,t){e.$("parallax").attr("target-x",t.clientX);e.$("parallax").attr("target-y",t.clientY)});n.bindElementAction(o,e,"${youtube_mute}","click",function(e,t){t.stopPropagation();t.preventDefault();if(youtube_player.isMuted()){youtube_player.unMute();e.getSymbol("youtube_mute").stop("on")}else{e.getSymbol("youtube_mute").stop("off");youtube_player.mute()}});n.bindElementAction(o,e,"${youtube_play_pause}","click",function(e,t){t.stopPropagation();t.preventDefault();if(1!=youtube_player.getPlayerState())youtube_player.playVideo();else youtube_player.pauseVideo()});n.bindElementAction(o,e,"${PLAYER_YT}","mouseleave",function(e,t){e.$("youtube_play_pause").css({transition:"opacity 1.5s",opacity:"0"});e.$("youtube_mute").css({transition:"opacity 1.5s",opacity:"0"});e.$("youtube_fullscreen").css({transition:"opacity 1.5s",opacity:"0"})});n.bindElementAction(o,e,"${PLAYER_YT}","mousemove",function(e,t){e.$("youtube_play_pause").css({transition:"opacity 0.4s",opacity:"1"});e.$("youtube_mute").css({transition:"opacity 0.4s",opacity:"1"});e.$("youtube_fullscreen").css({transition:"opacity 0.4s",opacity:"1"})});n.bindElementAction(o,e,"${PLAYER_YT}","click",function(e,t){if(youtube_player&&1!=youtube_player.getPlayerState()){t.stopPropagation();t.preventDefault();youtube_player.playVideo()}});n.bindElementAction(o,e,"${expand}","mouseover",function(e,t){t.stopPropagation();t.preventDefault();youtube_player.unMute();e.getSymbol("youtube_mute").stop("on")});n.bindElementAction(o,e,"${expand}","mouseout",function(e,t){t.stopPropagation();t.preventDefault();e.getSymbol("youtube_mute").stop("off");youtube_player.mute()})}("stage");!function(e){}("Preloader");!function(e){}("mute_button");!function(e){}("youtube_play_pause");!function(e){}("youtube_mute")}(AdobeEdge.$,AdobeEdge,"expand");var config={autoFreezeTime:28e3,unmutedVolume:.5,cancelFreezeOnYoutubeInteraction:!0},RichControllerClass=function(e){function t(){if(null==E){if(!("YouTubeComp"in window))throw"youtube-comp.js is not included.";E=new YouTubeComp(f.eventBus);if(config.cancelFreezeOnYoutubeInteraction)E.eventBus.addEventListener(E.USER_INTERACTION,i)}return E}function o(){if(!document[("mshidden"in document?"ms":"")+"hidden"])if(f.mobile.inPageVideoSupport()&&y&&_.currentTime>1/12&&_.currentTime<_.duration&&!g){if(_.paused)_.play();r()}}function n(){if("Enabler"in window){var e=[],t=_.querySelectorAll("source");if(0==t.length){var o=_.getAttribute("src"),n=o.lastIndexOf("media/");e.push(o.substr(n));_.removeAttribute("src")}else for(var a=0;a<t.length;a++){var o=t[a].src,n=o.lastIndexOf("media/");e.push(o.substr(n));_.removeChild(t[a])}for(var a=0;a<e.length;a++){var i=document.createElement("source");i.src=Enabler.getUrl(e[a]);_.appendChild(i)}}}function a(){i();if(config.autoFreezeTime>=0)b=setTimeout(function(){f.freeze(!0)},config.autoFreezeTime)}function i(){if(null!=b){clearTimeout(b);b=null}}function u(){var e=0,t=!0;setInterval(function(){if(!g)if(!isNaN(_.currentTime)&&!isNaN(_.duration)){if(_.currentTime==e&&_.currentTime<_.duration&&!t){t=!0;m.stop(1e3*_.currentTime)}if(c()&&t){t=!1;m.play(1e3*_.currentTime)}var o=m.getPosition()/1e3;if(o<_.duration&&Math.abs(o-_.currentTime)>.2){console.log("resync video");if(c())m.play(1e3*_.currentTime);else m.stop(1e3*_.currentTime)}e=_.currentTime}},100)}function r(){if(!g)if(!isNaN(_.currentTime)&&!isNaN(_.duration))if(_.currentTime<_.duration)m.play(1e3*_.currentTime)}function l(){var e=0,t={0:function(){Enabler.counter("Expand_Video_Progress_0%",true)},.25:function(){Enabler.counter("Expand_Video_Progress_25%",true)},.5:function(){Enabler.counter("Expand_Video_Progress_50%",true)},.75:function(){Enabler.counter("Expand_Video_Progress_75%",true)},1:function(){Enabler.counter("Expand_Video_Progress_100%",true)}};_.addEventListener("timeupdate",function(){if(!isNaN(_.currentTime)&&!isNaN(_.duration)){var o=_.currentTime/_.duration;if(e!=o){for(var n in t)if(n>=e&&o>=n)t[n]();e=o}}else e=0},!1)}function s(e){function t(){if(c()){_.removeEventListener("canplay",t,!1);_.removeEventListener("timeupdate",t,!1);e()}}_.addEventListener("canplay",t,!1);_.addEventListener("timeupdate",t,!1)}function p(e){e.stop("frozen");for(var t=e.getChildSymbols(),o=0;o<t.length;o++)p(t[o])}function c(){return _.currentTime>1/12&&!_.paused}function d(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()},hasTouchScreen:function(){var e=!1,t=function(e){return-1!==window.navigator.userAgent.toLowerCase().indexOf(e)};return("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(t("NT 5")||t("NT 6.1")||t("NT 6.0")||(e=!0)),e},inPageVideoSupport:function(){return!navigator.userAgent.match(/iPhone|iPod/i)}};return e}try{var f=this,y=!0;f.eventBus=new EventBusClass;f.FREEZE="FREEZE";f.mobile=d();f.isFrozen=function(){return g};f.isMuted=function(){return _.volume<=0};f.muteAudioSupported=function(){return!f.mobile.iOS()};e.controller=this;var m=e.getStage(),g=!1,b=null,x=m.$("loader"),_=m.$("video")[0],v=m.$("click_to_play_poster"),h=!0;n();studio.video.Reporter.attach("Expand_Intro",_)}catch(T){console.error("%s\n%O",T,T.stack)}f.disableVideoOnMobile=function(){if(f.mobile.any())y=!1};f.start=function(){try{document.addEventListener(("mshidden"in document?"ms":"")+"visibilitychange",o);if(f.mobile.any())Enabler.counter("Expand_Mobile_Served",true);else Enabler.counter("Expand_Desktop_Served",true);if(!g)a();v.hide();if(f.mobile.inPageVideoSupport()&&y){u();l();if(!g){s(function(){x.hide();h=!1});if(_.currentTime)_.currentTime=0;if(f.mobile.any()){_.pause();v.show()}else _.play()}else{x.hide();h=!1}}else{_.pause();m.$("video_group").hide();x.hide();h=!1;m.$("replay_group").hide();m.play("endshot")}console.log("started with config: %O",config)}catch(e){console.error("%s\n%O",e,e.stack)}};f.update=function(){try{if(g||!m.isPlaying())return;if(m.getPosition()>=m.getLabelPosition("frozen"))f.freeze(!0);f.eventBus.dispatch("UPDATE");var e=_.currentTime/_.duration;m.$("progress").css({width:100*e+"%"})}catch(t){console.error("%s\n%O",t,t.stack)}};f.playVideo=function(){try{g=!1;a();v.hide();_.currentTime=0;_.play()}catch(e){console.error("%s\n%O",e,e.stack)}};f.rePlay=function(){try{f.eventBus.dispatch("REPLAY");f.stopAllYouTubePlayers();g=!1;a();x.show();s(function(){x.hide()});m.play(0);_.load();if(_.currentTime)_.currentTime=0;_.play()}catch(e){console.error("%s\n%O",e,e.stack)}};f.freeze=function(e){try{e=void 0==e?!1:!0;i();if(!g){g=!0;p(m);x.hide();h=!1;v.hide();_.pause();console.log("frozen")}f.eventBus.dispatch(f.FREEZE,f,e)}catch(t){console.error("%s\n%O",t,t.stack)}};f.isVideoLoading=function(){return y&&h};f.playHeadIsBeforeEndshotLabel=function(){try{return m.getPosition()<m.getLabelPosition("endshot")}catch(e){console.error("%s\n%O",e,e.stack)}};f.mute=function(){_.volume=0};f.unmute=function(){_.volume=config.unmutedVolume};f.play=function(){_.play();m.play()};f.pause=function(){_.pause();m.stop()};f.togglePlay=function(){if(f.isPlaying())f.pause();else f.play()};f.isPlaying=function(){return!_.paused};var E=null;f.createYouTubePlayer=function(e,o,n,a){try{t().createYouTubePlayer(e,o,n,a)}catch(i){console.error("%s\n%O",i,i.stack)}};f.setYouTubePlayer=function(e,o,n,a){var i=new YoutubePlayerLoader(this,m,t());i.setPlayer(e,o,n,a)};f.stopAllYouTubePlayers=function(){try{return t().stopAllYouTubePlayers()}catch(e){console.error("%s\n%O",e,e.stack)}return null}},EventBusClass={};EventBusClass=function(){this.listeners={}};EventBusClass.prototype={addEventListener:function(e,t,o){for(var n=[],a=arguments.length,i=0;a>i;i++)n.push(arguments[i]);n=n.length>3?n.splice(3,n.length-1):[];if("undefined"!=typeof this.listeners[e])this.listeners[e].push({scope:o,callback:t,args:n});else this.listeners[e]=[{scope:o,callback:t,args:n}]},removeEventListener:function(e,t,o){if("undefined"!=typeof this.listeners[e]){for(var n=this.listeners[e].length,a=[],i=0;n>i;i++){var u=this.listeners[e][i];if(u.scope==o&&u.callback==t);else a.push(u)}this.listeners[e]=a}},hasEventListener:function(e,t,o){if("undefined"!=typeof this.listeners[e]){var n=this.listeners[e].length;if(void 0===t&&void 0===o)return n>0;for(var a=0;n>a;a++){var i=this.listeners[e][a];if((o?i.scope==o:!0)&&i.callback==t)return!0}}return!1},dispatch:function(e,t){for(var o=0,n={type:e,target:t},a=[],i=arguments.length,u=0;i>u;u++)a.push(arguments[u]);a=a.length>2?a.splice(2,a.length-1):[];a=[n].concat(a);if("undefined"!=typeof this.listeners[e])for(var r=this.listeners[e].length,u=0;r>u;u++){var l=this.listeners[e][u];if(l&&l.callback){var s=a.concat(l.args);l.callback.apply(l.scope,s);o+=1}}},getEvents:function(){var e="";for(var t in this.listeners)for(var o=this.listeners[t].length,n=0;o>n;n++){var a=this.listeners[t][n];e+=a.scope&&a.scope.className?a.scope.className:"anonymous";e+=" listen for '"+t+"'\n"}return e}};var EventBus=new EventBusClass,YouTubeComp=function(e){function t(e,t){if(!t)n.stopAllYouTubePlayers()}function o(e){if(-1==a){a=0;var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o);window.onYouTubeIframeAPIReady=function(){a=1;for(var e=0;e<u.length;++e)try{u[e]()}catch(t){console.error("%s\n%O",t,t.stack)}u=null};u.push(e)}else if(0==a)u.push(e);else e()}var n=this;n.eventBus=new EventBusClass;n.USER_INTERACTION="USER_INTERACTION";var a=-1,i=[];e.addEventListener("FREEZE",t);n.createYouTubePlayer=function(e,t,a,u){o(function(){function o(e){if(u)u(y);p(y);document.addEventListener("webkitfullscreenchange",r,!1);document.addEventListener("mozfullscreenchange",r,!1);document.addEventListener("fullscreenchange",r,!1);document.addEventListener("MSFullscreenChange",r,!1)}function r(e){n.eventBus.dispatch(n.USER_INTERACTION);if(f)Enabler.counter("Expand_YouTube_Fullscreen_Off",true);else Enabler.counter("Expand_YouTube_Fullscreen_On",true);f=!f}function l(){return y.isMuted()||0==y.getVolume()}function s(e){switch(e.data){case YT.PlayerState.PLAYING:n.eventBus.dispatch(n.USER_INTERACTION);Enabler.startTimer("Expand_YouTube_Timer");Enabler.counter("Expand_YouTube_Play",true);m=setInterval(function(){var e=l();if(!e&&0==g){Enabler.counter("Expand_YouTube_Sound_On",true);g=1}if(e&&1==g){Enabler.counter("Expand_YouTube_Sound_Off",true);g=0}},500);break;case YT.PlayerState.PAUSED:n.eventBus.dispatch(n.USER_INTERACTION);Enabler.counter("Expand_YouTube_Pause",true);Enabler.stopTimer("Expand_YouTube_Timer");clearInterval(m);break;case YT.PlayerState.ENDED:Enabler.stopTimer("Expand_YouTube_Timer");clearInterval(m)}}function p(e,t){function o(){if(null!=e.getPlayerState)if(e.getPlayerState()==YT.PlayerState.PLAYING)n()}function n(){var t=Math.min(1,e.getCurrentTime()/e.getDuration());if(t>=a-.005){if(0==a)Enabler.counter("Expand_YouTube_Video_Progress_0%",true);else if(.25==a)Enabler.counter("Expand_YouTube_Video_Progress_25%",true);else if(.5==a)Enabler.counter("Expand_YouTube_Video_Progress_50%",true);else if(.75==a)Enabler.counter("Expand_YouTube_Video_Progress_75%",true);else if(a>=1)Enabler.counter("Expand_YouTube_Video_Progress_100%",true);a+=.25}if(t>=1)clearInterval(i)}var a=0,i=setInterval(o,100)}var c={iv_load_policy:3,modestbranding:1,playsinline:1,rel:0,showinfo:0},d=a||c,f=!1,y=new YT.Player(e.attr("id"),{width:"100%",height:"100%",videoId:t,playerVars:d,events:{onReady:o,onStateChange:s}});i.push(y);var m,g=0})};n.stopAllYouTubePlayers=function(){for(var e=0;e<i.length;++e)try{i[e].stopVideo()}catch(t){console.error("%s\n%O",t,t.stack)}};var u=[]};